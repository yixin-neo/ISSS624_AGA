{
  "hash": "ea56777c412bd5f3ce9cc64770d63398",
  "result": {
    "markdown": "---\ntitle: \"In-class Exercise 1\"\n#subtitle:\nauthor: \"NeoYX\"\ndate: '18 Nov 2023'\ndate-modified: \"2023-11-20\" #last-modified\"\neditor: visual\nexecute: \n  freeze: auto\n  warning: false\n  #echo: false\n  #message: false\nformat: \n  html:\n    code-fold: false\n    code-overflow: scroll\n    code-summary: \"Show the code\"\n    code-line-numbers: true\n---\n\n\n## Getting started\n\nThe code chunk below loads the following packages:\n\n-   tmap: for thematic mapping\n\n-   sf: for geospatial data handling\n\n-   tidyverse: for non spatial data handling\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(sf, tmap, tidyverse, knitr)\n```\n:::\n\n\n### Importing the OD data\n\nFirstly we will import the *Passenger volume by Origin Destination Bus Stops* dataset downloaded from the LTA Datamall by using the read_csv() of the **readr** package (to read text data).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nodbus_aug <- read_csv(\"data\\\\aspatial\\\\origin_destination_bus_202308.csv\")\n```\n:::\n\n\nConverting character data type to factor data type.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nodbus_aug$ORIGIN_PT_CODE <- as.factor(odbus_aug$ORIGIN_PT_CODE)\nodbus_aug$DESTINATION_PT_CODE <- as.factor(odbus_aug$DESTINATION_PT_CODE)\n```\n:::\n\n\nDerive a new field called `TRIPS` .\n\n22009: Boon Lay\n\n46009: Woodlands interchange\n\n75009: Tampines interchange\n\nBetter to have a map\n\n\n::: {.cell}\n\n```{.r .cell-code}\norigtrip_7_9 <- odbus_aug %>% \n  filter(DAY_TYPE == 'WEEKDAY') %>% \n  filter(TIME_PER_HOUR >= 7 &\n           TIME_PER_HOUR <= 9) %>% \n  group_by(ORIGIN_PT_CODE) %>% \n  summarise(TRIPS = sum(TOTAL_TRIPS))\n\norigtrip_7_9 %>% arrange(desc(TRIPS))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5,015 × 2\n   ORIGIN_PT_CODE  TRIPS\n   <fct>           <dbl>\n 1 22009          295128\n 2 46009          232902\n 3 75009          134781\n 4 52009          121422\n 5 55509          113434\n 6 24009          108437\n 7 65199          100791\n 8 59009           92333\n 9 84009           88092\n10 54261           86565\n# ℹ 5,005 more rows\n```\n:::\n:::\n\n\n### Importing the geospatial data\n\nTwo geospatial data will be used in this exercise.\n\n#### Load the geospatial bustop kml file and immediately transform to Singapore projection system (EPSG 3414)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbustop <- st_read(dsn=\"data\\\\geospatial\\\\BusStopLocation\\\\BusStopLocation_Jul2023\", layer = \"BusStop\") %>% \n  st_transform(crs = 3414)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nReading layer `BusStop' from data source \n  `C:\\yixin-neo\\ISSS624_AGA\\In-class_Ex1\\data\\geospatial\\BusStopLocation\\BusStopLocation_Jul2023' \n  using driver `ESRI Shapefile'\nSimple feature collection with 5161 features and 3 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 3970.122 ymin: 26482.1 xmax: 48284.56 ymax: 52983.82\nProjected CRS: SVY21\n```\n:::\n:::\n\n\n#### \n\nLoad the geospatial data of basemap from gov.sg , usually in WSG84 format\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmpsz <- st_read(dsn=\"data\\\\geospatial\\\\MPSZ-2019\", layer='MPSZ-2019')  %>% \n  st_transform(crs = 3414)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nReading layer `MPSZ-2019' from data source \n  `C:\\yixin-neo\\ISSS624_AGA\\In-class_Ex1\\data\\geospatial\\MPSZ-2019' \n  using driver `ESRI Shapefile'\nSimple feature collection with 332 features and 6 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 103.6057 ymin: 1.158699 xmax: 104.0885 ymax: 1.470775\nGeodetic CRS:  WGS 84\n```\n:::\n\n```{.r .cell-code}\nmpsz\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nSimple feature collection with 332 features and 6 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21 / Singapore TM\nFirst 10 features:\n                 SUBZONE_N SUBZONE_C       PLN_AREA_N PLN_AREA_C       REGION_N\n1              MARINA EAST    MESZ01      MARINA EAST         ME CENTRAL REGION\n2         INSTITUTION HILL    RVSZ05     RIVER VALLEY         RV CENTRAL REGION\n3           ROBERTSON QUAY    SRSZ01  SINGAPORE RIVER         SR CENTRAL REGION\n4  JURONG ISLAND AND BUKOM    WISZ01  WESTERN ISLANDS         WI    WEST REGION\n5             FORT CANNING    MUSZ02           MUSEUM         MU CENTRAL REGION\n6         MARINA EAST (MP)    MPSZ05    MARINE PARADE         MP CENTRAL REGION\n7                   SUDONG    WISZ03  WESTERN ISLANDS         WI    WEST REGION\n8                  SEMAKAU    WISZ02  WESTERN ISLANDS         WI    WEST REGION\n9           SOUTHERN GROUP    SISZ02 SOUTHERN ISLANDS         SI CENTRAL REGION\n10                 SENTOSA    SISZ01 SOUTHERN ISLANDS         SI CENTRAL REGION\n   REGION_C                       geometry\n1        CR MULTIPOLYGON (((33222.98 29...\n2        CR MULTIPOLYGON (((28481.45 30...\n3        CR MULTIPOLYGON (((28087.34 30...\n4        WR MULTIPOLYGON (((14557.7 304...\n5        CR MULTIPOLYGON (((29542.53 31...\n6        CR MULTIPOLYGON (((35279.55 30...\n7        WR MULTIPOLYGON (((15772.59 21...\n8        WR MULTIPOLYGON (((19843.41 21...\n9        CR MULTIPOLYGON (((30870.53 22...\n10       CR MULTIPOLYGON (((26879.04 26...\n```\n:::\n:::\n\n::: {.cell fig.asp='0.68'}\n\n:::\n",
    "supporting": [
      "In-class_Ex1_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}